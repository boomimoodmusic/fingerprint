<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>지문 효과</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            touch-action: none;
        }

        .fingerprint {
            position: absolute;
            width: 80px;
            height: 80px;
            pointer-events: none;
            opacity: 0;
            transform: translate(-50%, -50%);
            animation: fadeInOut 3s ease-out forwards;
        }

        @keyframes fadeInOut {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            20% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(1.2);
            }
        }

        .fingerprint svg {
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.3));
        }

        .center-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 24px;
            text-align: center;
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.8;
            max-width: 90%;
            pointer-events: none;
            user-select: none;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        @media (max-width: 768px) {
            .center-text {
                font-size: 18px;
            }
            .center-text div {
                font-size: 13px !important;
            }
        }
    </style>
</head>
<body>
    <div class="center-text" id="centerText">
        우리는<br>
        질서, 혼돈, 우연으로<br>
        호흡하는 유기체입니다.<br>
        나는 그 일부이자 전체입니다.
        <div style="font-size: 16px; margin-top: 30px; opacity: 0.8;">
            화면에 지문을 찍으면<br>공존계약이 성립됩니다.
        </div>
    </div>
    <script>
        let firstTouch = true;
        let isAnimating = false;
        const originalText = `우리는<br>
        질서, 혼돈, 우연으로<br>
        호흡하는 유기체입니다.<br>
        나는 그 일부이자 전체입니다.
        <div style="font-size: 16px; margin-top: 30px; opacity: 0.8;">
            화면에 지문을 찍으면<br>공존계약이 성립됩니다.
        </div>`;

        // 오디오 컨텍스트 생성
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        // 심장 소리 재생 함수
        function playBeep() {
            // 첫 번째 박동 (쿵)
            const osc1 = audioContext.createOscillator();
            const gain1 = audioContext.createGain();
            
            osc1.type = 'sine';
            osc1.frequency.setValueAtTime(60, audioContext.currentTime);
            osc1.frequency.exponentialRampToValueAtTime(40, audioContext.currentTime + 0.1);
            
            gain1.gain.setValueAtTime(0.3, audioContext.currentTime);
            gain1.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
            
            osc1.connect(gain1);
            gain1.connect(audioContext.destination);
            
            osc1.start(audioContext.currentTime);
            osc1.stop(audioContext.currentTime + 0.15);
            
            // 두 번째 박동 (쿵) - 약간 뒤에
            const osc2 = audioContext.createOscillator();
            const gain2 = audioContext.createGain();
            
            osc2.type = 'sine';
            osc2.frequency.setValueAtTime(65, audioContext.currentTime + 0.15);
            osc2.frequency.exponentialRampToValueAtTime(45, audioContext.currentTime + 0.25);
            
            gain2.gain.setValueAtTime(0.25, audioContext.currentTime + 0.15);
            gain2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            osc2.connect(gain2);
            gain2.connect(audioContext.destination);
            
            osc2.start(audioContext.currentTime + 0.15);
            osc2.stop(audioContext.currentTime + 0.3);
        }

        // 텍스트 변경 함수
        function changeText() {
            if (firstTouch && !isAnimating) {
                isAnimating = true;
                const centerText = document.getElementById('centerText');
                
                // 2초 후에 페이드 아웃 시작
                setTimeout(() => {
                    centerText.style.transition = 'opacity 0.8s ease-out';
                    centerText.style.opacity = '0';
                    
                    // 페이드 아웃 후 텍스트 변경
                    setTimeout(() => {
                        centerText.innerHTML = '당신의 리듬이<br>세계에 닿았습니다.';
                        centerText.style.opacity = '1';
                        
                        // 5초 후 다시 원래 텍스트로
                        setTimeout(() => {
                            centerText.style.opacity = '0';
                            
                            setTimeout(() => {
                                centerText.innerHTML = originalText;
                                centerText.style.opacity = '1';
                                firstTouch = true;
                                isAnimating = false;
                            }, 800);
                        }, 5000);
                    }, 800);
                }, 2000);
                
                firstTouch = false;
            }
        }
        // SVG 지문 패턴 생성
        function createFingerprintSVG() {
            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('width', '80');
            svg.setAttribute('height', '80');
            svg.setAttribute('viewBox', '0 0 80 80');
            
            // 지문 라인들 (실제 지문처럼 중앙이 채워진 패턴)
            const lines = [
                // 바깥쪽 큰 곡선들
                'M 40 15 Q 54 20, 60 35 Q 63 50, 60 62 Q 54 72, 40 75',
                'M 40 18 Q 52 23, 57 35 Q 60 47, 57 58 Q 52 67, 40 70',
                'M 40 21 Q 50 25, 55 35 Q 58 45, 55 55 Q 50 63, 40 67',
                'M 40 24 Q 48 27, 53 35 Q 56 44, 53 53 Q 48 60, 40 64',
                
                // 중간 곡선들
                'M 40 27 Q 47 29, 51 36 Q 54 44, 51 52 Q 47 58, 40 61',
                'M 40 30 Q 46 32, 49 38 Q 51 44, 49 50 Q 46 55, 40 58',
                'M 40 33 Q 45 34, 47 39 Q 49 44, 47 49 Q 45 53, 40 55',
                'M 40 36 Q 44 37, 46 40 Q 47 44, 46 48 Q 44 51, 40 52',
                
                // 중앙 곡선들 (더 연결되게)
                'M 40 39 Q 43 40, 44 42 Q 45 44, 44 46 Q 43 48, 40 49',
                'M 40 41 Q 42 42, 43 43 Q 43 44, 43 45 Q 42 46, 40 47',
                'M 40 43 Q 41 43, 42 44 Q 42 44, 42 45 Q 41 45, 40 45',
                
                // 왼쪽 바깥 곡선들
                'M 35 17 Q 24 24, 20 38 Q 17 52, 20 64 Q 26 73, 37 75',
                'M 36 20 Q 26 26, 22 38 Q 20 50, 23 60 Q 28 68, 37 70',
                'M 36 23 Q 28 28, 24 38 Q 22 48, 25 57 Q 30 64, 37 67',
                'M 37 26 Q 30 30, 27 38 Q 25 47, 28 55 Q 32 61, 38 64',
                
                // 왼쪽 중간 곡선들
                'M 37 29 Q 32 32, 29 38 Q 27 46, 30 53 Q 34 58, 38 61',
                'M 38 32 Q 34 34, 32 39 Q 30 45, 32 51 Q 35 56, 39 58',
                'M 38 35 Q 35 37, 34 40 Q 32 44, 34 49 Q 36 53, 39 55',
                'M 38 38 Q 36 39, 35 41 Q 34 43, 35 46 Q 37 49, 39 51',
            ];
            
            lines.forEach(d => {
                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', d);
                path.setAttribute('stroke', 'white');
                path.setAttribute('stroke-width', '1.5');
                path.setAttribute('fill', 'none');
                path.setAttribute('stroke-linecap', 'round');
                svg.appendChild(path);
            });
            
            return svg;
        }

        // 지문 생성 함수
        function createFingerprint(x, y) {
            const fingerprint = document.createElement('div');
            fingerprint.className = 'fingerprint';
            fingerprint.style.left = x + 'px';
            fingerprint.style.top = y + 'px';
            
            // 약간의 랜덤 회전 추가
            const rotation = Math.random() * 360;
            fingerprint.style.transform = `translate(-50%, -50%) rotate(${rotation}deg)`;
            
            fingerprint.appendChild(createFingerprintSVG());
            document.body.appendChild(fingerprint);
            
            // 애니메이션 끝나면 제거
            setTimeout(() => {
                fingerprint.remove();
            }, 3000);
        }

        // 터치 이벤트 (모바일)
        document.body.addEventListener('touchstart', (e) => {
            e.preventDefault();
            playBeep();
            changeText();
            Array.from(e.touches).forEach(touch => {
                createFingerprint(touch.clientX, touch.clientY);
            });
        });

        // 터치 이동 (드래그할 때도 지문 남기기)
        document.body.addEventListener('touchmove', (e) => {
            e.preventDefault();
            Array.from(e.touches).forEach(touch => {
                createFingerprint(touch.clientX, touch.clientY);
            });
        });

        // 마우스 클릭 이벤트 (데스크탑)
        document.body.addEventListener('click', (e) => {
            playBeep();
            changeText();
            createFingerprint(e.clientX, e.clientY);
        });

        // 마우스 드래그 (데스크탑에서도 드래그 가능)
        let isMouseDown = false;
        document.body.addEventListener('mousedown', () => {
            isMouseDown = true;
        });
        document.body.addEventListener('mouseup', () => {
            isMouseDown = false;
        });
        document.body.addEventListener('mousemove', (e) => {
            if (isMouseDown) {
                createFingerprint(e.clientX, e.clientY);
            }
        });
    </script>
</body>
</html>
